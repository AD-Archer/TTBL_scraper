{
  "discovery_summary": {
    "primary_method": "results.ittf.link Fabrik API",
    "status": "Complete",
    "date": "2026-01-09T22:15:00Z",
    "agent": "Agent 3"
  },
  "endpoints": {
    "fabrik_api": {
      "base_url": "https://results.ittf.link/index.php",
      "description": "Joomla CMS with Fabrik component providing public JSON API for ITTF/WTT match data",
      "authentication": "None required",
      "rate_limit": "Unknown",
      "endpoints": {
        "player_matches": {
          "url_pattern": "https://results.ittf.link/index.php?option=com_fabrik&view=list&listid=31",
          "method": "GET",
          "parameters": {
            "format": "json or raw",
            "vw_matches___yr[value]": "Filter by year (2024, 2025, 2026)",
            "vw_matches___player_a_id[value]": "Filter by player A ID",
            "vw_matches___player_x_id[value]": "Filter by player X ID",
            "vw_matches___player_y_id[value]": "Filter by player Y ID",
            "limit": "Limit number of results"
          },
          "data_fields": [
            "vw_matches___id",
            "vw_matches___yr_raw",
            "vw_matches___tournament_id",
            "vw_matches___player_a_id",
            "vw_matches___name_a",
            "vw_matches___player_x_id",
            "vw_matches___name_x",
            "vw_matches___player_y_id",
            "vw_matches___name_y",
            "vw_matches___games",
            "vw_matches___winner",
            "vw_matches___winner_name",
            "vw_matches___wo",
            "vw_matches___event",
            "vw_matches___stage",
            "vw_matches___round"
          ],
          "sample_response": {
            "vw_matches___yr": "2025",
            "vw_matches___yr_raw": 2025,
            "vw_matches___id": 10602874,
            "vw_matches___tournament_id_raw": 3274,
            "vw_matches___tournament_id": "WTT Youth Contender San Francisco 2026",
            "vw_matches___player_a_id": 209656,
            "vw_matches___player_a_id_raw": 209656,
            "vw_matches___name_a": "SUN Frank (USA)",
            "vw_matches___assoc_a": "USA",
            "vw_matches___player_x_id": 209645,
            "vw_matches___player_x_id_raw": 209645,
            "vw_matches___name_x": "BAVISKAR Shuban (USA)",
            "vw_matches___assoc_x": "USA",
            "vw_matches___games": "3:11 3:11 8:11    ",
            "vw_matches___winner": 209645,
            "vw_matches___winner_name": "BAVISKAR Shuban",
            "vw_matches___event": "U11MS",
            "vw_matches___stage": "Main Draw",
            "vw_matches___round": "Final",
            "vw_matches___res": "0 - 3"
          }
        },
        "wtt_results": {
          "url_pattern": "https://results.ittf.link/index.php?option=com_fabrik&view=list&listid=55",
          "method": "GET",
          "description": "WTT tournament results"
        },
        "tournament_results": {
          "url_pattern": "https://results.ittf.link/index.php?option=com_fabrik&view=list&listid=70",
          "method": "GET",
          "description": "Tournament match results"
        },
        "player_ranking_history": {
          "url_pattern": "https://results.ittf.link/index.php?option=com_fabrik&view=list&listid=102",
          "method": "GET",
          "description": "Player ranking history"
        }
      }
    },
    "azure_api_gateway": {
      "base_url": "https://wttcmsapigateway-new.azure-api.net/internalttu",
      "description": "Official WTT Azure API Gateway - requires authentication",
      "authentication": "Required (method unknown)",
      "status": "Locked - 401 Unauthorized on all endpoints",
      "endpoints": {
        "player_profile": {
          "url": "https://wttcmsapigateway-new.azure-api.net/internalttu/PlayerProfile/GetPlayerProfile",
          "method": "GET",
          "parameters": ["IttfId"],
          "status": "401 Unauthorized"
        },
        "matches": {
          "url": "https://wttcmsapigateway-new.azure-api.net/internalttu/Matches/GetMatches",
          "method": "GET",
          "parameters": ["IttfId"],
          "status": "401 Unauthorized"
        },
        "head_to_head": {
          "url": "https://wttcmsapigateway-new.azure-api.net/internalttu/HeadToHead/GetHeadToHead",
          "method": "GET",
          "parameters": ["IttfId", "opponentId"],
          "status": "401 Unauthorized"
        }
      },
      "auth_attempts": {
        "bearer_token": "Failed",
        "api_key": "Failed",
        "azure_subscription_key": "Failed",
        "referer_header": "Failed",
        "q_parameter": "Works for rankings, not match endpoints",
        "path_variations": [
          "/v1/PlayerProfile/GetPlayerProfile",
          "/v2/PlayerProfile/GetPlayerProfile",
          "/public/PlayerProfile/GetPlayerProfile",
          "/api/PlayerProfile/GetPlayerProfile",
          "/publicapi/PlayerProfile/GetPlayerProfile"
        ],
        "all_returned_401_or_404": true
      }
    },
    "commercial_apis": {
      "sportsdevs": {
        "base_url": "https://docs.sportdevs.com/docs/table-tennis",
        "authentication": "API Key",
        "pricing": "Free tier: 300 requests/day",
        "endpoints": ["/matches", "/matches-statistics", "/standings", "/correct-score"],
        "status": "Alternative - commercial API"
      },
      "sportradar": {
        "base_url": "https://developer.sportradar.com/table-tennis/reference/overview",
        "authentication": "API Key",
        "pricing": "Paid",
        "endpoints": ["matches", "rankings", "historical"],
        "status": "Alternative - commercial API"
      },
      "oddsmatrix": {
        "base_url": "https://oddsmatrix.com/sports/table-tennis/",
        "authentication": "Unknown",
        "coverage": "291 table tennis competitions",
        "status": "Alternative - betting odds"
      },
      "365oddsapi": {
        "base_url": "https://365oddsapi.com/sports-api/table-tennis-api/",
        "authentication": "Unknown",
        "trial": "14 days free",
        "status": "Alternative - odds + statistics"
      }
    }
  },
  "data_structure": {
    "match": {
      "vw_matches___id": "Match unique identifier",
      "vw_matches___yr_raw": "Match year",
      "vw_matches___tournament_id_raw": "Tournament ID",
      "vw_matches___tournament_id": "Tournament name",
      "vw_matches___player_a_id": "Player A ID (singles/doubles)",
      "vw_matches___player_x_id": "Player X ID (opponent)",
      "vw_matches___player_y_id": "Player Y ID (doubles)",
      "vw_matches___name_a": "Player A name with association",
      "vw_matches___name_x": "Player X name with association",
      "vw_matches___name_y": "Player Y name with association",
      "vw_matches___games": "Game-by-game scores (space-separated)",
      "vw_matches___winner": "Winning player ID",
      "vw_matches___winner_name": "Winner name",
      "vw_matches___wo": "Walkover status (1 = walkover, 0 = played)",
      "vw_matches___event": "Event type (e.g., U11MS = U11 Men's Singles)",
      "vw_matches___stage": "Tournament stage (Qualification, Main Draw)",
      "vw_matches___round": "Round number",
      "vw_matches___res": "Match result (e.g., '3 - 1' = Player A won 3-1)"
    },
    "games_parsing": {
      "format": "Space-separated game scores",
      "example": "3:11 3:11 8:11    ",
      "parsing_method": "Split on spaces, then parse each game with ':' separator",
      "note": "Trailing spaces in raw data should be trimmed"
    }
  },
  "recommendations": {
    "primary_scraper": "Use results.ittf.link Fabrik API (listid=31) as primary data source",
    "avoid": "Do NOT use Azure API Gateway endpoints - all require authentication",
    "authentication_status": "No working bypass method found for WTT Azure API",
    "html_scraping": "Use only as fallback - requires JavaScript rendering, high maintenance",
    "mobile_apps": "Reverse engineering possible but requires significant effort (mitmproxy, Frida, SSL pinning bypass)",
    "commercial_apis": "Consider SportDevs free tier (300 requests/day) for specialized needs",
    "player_id_discovery": "Use Fabrik API player match endpoints to discover new player IDs",
    "game_score_parser": "Implement space-separated score parser with ':' delimiter",
    "rate_limiting": "Test Fabrik API rate limits empirically - implement exponential backoff"
  },
  "tools_and_resources": {
    "recommended_stack": [
      "requests - HTTP client",
      "beautifulsoup4 - HTML parsing (if needed)",
      "pandas - Data manipulation",
      "json - Built-in for API responses"
    ],
    "mobile_reversing": [
      "apkurlgrep - Extract endpoints from APK",
      "mitmproxy - Traffic interception",
      "frida - SSL pinning bypass",
      "objection - Automated bypass tool"
    ],
    "documentation": [
      "https://docs.sportdevs.com/docs/table-tennis",
      "https://developer.sportradar.com/table-tennis/reference/overview"
    ]
  },
  "challenges_and_solutions": {
    "azure_api_auth": {
      "challenge": "All match endpoints return 401 Unauthorized",
      "attempted": ["Bearer token", "API key", "Azure subscription key", "Referer header", "q parameter"],
      "solution": "Use results.ittf.link Fabrik API instead"
    },
    "player_id_filtering": {
      "challenge": "Not clear if Fabrik uses raw IDs or name-based filtering",
      "status": "Parameter works but may need different player IDs per tournament"
    },
    "game_scores": {
      "challenge": "Games field is space-separated string, not structured array",
      "solution": "Parse by splitting on spaces, then parse each game with ':' separator"
    }
  },
  "success_criteria": {
    "match_access_method_found": true,
    "auth_requirements_documented": true,
    "endpoints_catalog_created": true,
    "curl_examples_provided": true,
    "comparison_of_access_methods": true,
    "working_primary_endpoint": true
  }
}
